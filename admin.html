<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard Admin - Asdar Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
  <style>
    body { padding: 20px; background-color: #f5f5f5; font-family: 'Poppins', sans-serif; }
    h1 { margin-bottom: 20px; }
    .card { margin-bottom: 15px; }
    img { max-width: 100px; margin-top: 10px; border-radius: 5px; }
    #galeri img { max-width: 120px; margin: 5px; border-radius: 6px; }
    textarea { font-family: monospace; }
  </style>
</head>
<body>
<div class="container"> 
  <h1>Dashboard Admin - Asdar Store</h1>  <!-- Filter & Pencarian Pesanan -->  <div class="row mb-3">
    <div class="col-md-3">
      <select id="filterStatus" class="form-select">
        <option value="">Filter Semua Status</option>
        <option value="Belum Bayar">Belum Bayar</option>
        <option value="Sudah Bayar">Sudah Bayar</option>
        <option value="Diproses">Diproses</option>
        <option value="Selesai">Selesai</option>
      </select>
    </div>
    <div class="col-md-3">
      <input type="text" id="searchId" class="form-control" placeholder="Cari ID Pesanan" />
    </div>
    <div class="col-md-3">
      <button class="btn btn-success w-100" id="exportCSVBtn">Export CSV</button>
    </div>
    <div class="col-md-3">
      <button class="btn btn-warning w-100" id="refreshDataBtn">Refresh Data</button>
    </div>
  </div>  <!-- Daftar Pesanan -->  <div id="pesananList"></div>  <!-- Upload Bukti Admin -->  <h3>Upload Bukti Admin ke Pembeli</h3>
  <input type="file" id="buktiAdmin" class="form-control mb-2" accept="image/*" />
  <button id="uploadBuktiBtn" class="btn btn-primary mb-4">Kirim Bukti & Selesaikan</button>  <!-- Form Produk -->  <h3>Tambah / Edit Produk</h3>
  <form id="formProduk" class="row g-3 mb-4">
    <div class="col-md-3">
      <input type="text" id="kategori" class="form-control" placeholder="Kategori Produk" required />
    </div>
    <div class="col-md-3">
      <input type="text" id="varian" class="form-control" placeholder="Varian / Nama Produk" required />
    </div>
    <div class="col-md-2">
      <input type="text" id="harga" class="form-control" placeholder="Harga (contoh Rp 30.000)" required />
    </div>
    <div class="col-md-4">
      <input type="text" id="cara" class="form-control" placeholder="Keterangan / Cara Beli" required />
    </div>
    <div class="col-12">
      <button type="submit" class="btn btn-success">Simpan / Edit Produk</button>
    </div>
  </form>  <h4>Galeri Bukti Transfer</h4>
  <div id="galeri" class="d-flex flex-wrap"></div>  <!-- Editor Fitur Dinamis -->  <hr>
  <h4>üß© Editor Fitur Dinamis</h4>
  <form id="formFiturDinamis" class="mb-4">
    <input class="form-control mb-2" id="halamanFitur" placeholder="Contoh: index.html" required /><label>HTML</label>
<div id="editorHTML" style="height: 150px; width: 100%;" class="mb-2"></div>

<label>CSS</label>
<div id="editorCSS" style="height: 100px; width: 100%;" class="mb-2"></div>

<label>JS</label>
<div id="editorJS" style="height: 100px; width: 100%;" class="mb-2"></div>

<button type="submit" class="btn btn-success">üíæ Simpan Fitur</button>
<button type="button" class="btn btn-danger" onclick="hapusFiturDinamis()">üóëÔ∏è Hapus</button>

  </form>  <h5>üì∫ Preview Langsung</h5>
  <div id="previewDinamis" class="border p-3 bg-light rounded"></div>
</div><!-- Firebase SDK --><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script><script>
const firebaseConfig = {
  apiKey: "AIzaSyA_L6U3HKM1DnKuq_Q1zKFH4bk8GMAz210",
  authDomain: "asdarstoredigitalll-d89c4.firebaseapp.com",
  databaseURL: "https://asdarstoredigitalll-d89c4-default-rtdb.firebaseio.com",
  projectId: "asdarstoredigitalll-d89c4",
  storageBucket: "asdarstoredigitalll-d89c4.appspot.com",
  messagingSenderId: "220670500351",
  appId: "1:220670500351:web:5737ae5958a6f5a67d5bca",
  measurementId: "G-CMRW37J19G"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const editorHTML = ace.edit("editorHTML", { mode: "ace/mode/html", theme: "ace/theme/github" });
const editorCSS = ace.edit("editorCSS", { mode: "ace/mode/css", theme: "ace/theme/github" });
const editorJS = ace.edit("editorJS", { mode: "ace/mode/javascript", theme: "ace/theme/github" });

const preview = document.getElementById("previewDinamis");
const form = document.getElementById("formFiturDinamis");

form.addEventListener("submit", function (e) {
  e.preventDefault();
  const halaman = document.getElementById("halamanFitur").value;
  const html = editorHTML.getValue();
  const css = editorCSS.getValue();
  const js = editorJS.getValue();

  db.ref("fiturDinamis/" + halaman).set({ html, css, js }).then(() => {
    alert("‚úÖ Fitur berhasil disimpan.");
    tampilkanPreview(html, css, js);
  });
});

function tampilkanPreview(html, css, js) {
  preview.innerHTML = `<style>${css}</style>${html}<script>${js}<\/script>`;}

function hapusFiturDinamis() { const halaman = document.getElementById("halamanFitur").value; if (confirm("Yakin ingin hapus fitur ini?")) { db.ref("fiturDinamis/" + halaman).remove().then(() => { alert("‚úÖ Fitur dihapus."); editorHTML.setValue(""); editorCSS.setValue(""); editorJS.setValue(""); preview.innerHTML = ""; }); } }

window.addEventListener("DOMContentLoaded", () => { const halaman = window.location.pathname.split("/").pop(); db.ref("fiturDinamis/" + halaman).once("value").then(snapshot => { const data = snapshot.val(); if (data) { if (document.getElementById("halamanFitur")) { document.getElementById("halamanFitur").value = halaman; editorHTML.setValue(data.html, -1); editorCSS.setValue(data.css, -1); editorJS.setValue(data.js, -1); tampilkanPreview(data.html, data.css, data.js); } else { const style = document.createElement("style"); style.innerHTML = data.css; document.head.appendChild(style);

const div = document.createElement("div");
    div.innerHTML = data.html;
    document.body.appendChild(div);

    const script = document.createElement("script");
    script.innerHTML = data.js;
    document.body.appendChild(script);
  }
}

}); }); </script>

</body>
</html>
