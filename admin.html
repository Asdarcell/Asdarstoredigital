<!-- [VERSI MODULAR SUPER POWERFUL] --><!-- Akan dibagi menjadi dua file: admin.html & index.html --><!-- File pertama: admin.html --><!-- File kedua akan saya kirim setelah ini: index.html dinamis penuh --><!-- Semua fitur dikontrol dari Firebase --><!-- BEGIN: admin.html --><!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Admin Modular - Asdar Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body class="p-4">
  <div class="container">
    <h1 class="mb-4">Dashboard Modular Admin - Asdar Store</h1><!-- Fitur Umum -->
<h3>Pengaturan Toko</h3>
<form id="formPengaturan" class="mb-4">
  <div class="form-check">
    <input class="form-check-input" type="checkbox" id="showTestimoni">
    <label class="form-check-label" for="showTestimoni">Tampilkan Testimoni</label>
  </div>
  <div class="form-check">
    <input class="form-check-input" type="checkbox" id="showCekStatus">
    <label class="form-check-label" for="showCekStatus">Tampilkan Cek Status</label>
  </div>
  <label class="mt-3">Metode Pembayaran (pisahkan dengan koma):</label>
  <input type="text" id="metodePembayaran" class="form-control mb-3" placeholder="QRIS,Dana,ShopeePay" />
  <label>Banner Atas:</label>
  <input type="text" id="banner" class="form-control mb-3" />
  <label>Catatan Info:</label>
  <textarea id="note" class="form-control mb-3"></textarea>
  <button type="submit" class="btn btn-success">💾 Simpan Pengaturan</button>
</form>

<!-- Produk -->
<h3>Produk</h3>
<form id="formProduk" class="row g-2 mb-4">
  <div class="col-md-3"><input type="text" id="kategori" class="form-control" placeholder="Kategori" required /></div>
  <div class="col-md-3"><input type="text" id="namaProduk" class="form-control" placeholder="Nama Produk" required /></div>
  <div class="col-md-2"><input type="number" id="harga" class="form-control" placeholder="Harga" required /></div>
  <div class="col-md-4"><input type="text" id="deskripsi" class="form-control" placeholder="Deskripsi" required /></div>
  <div class="col-12"><button type="submit" class="btn btn-primary">➕ Tambah / Update Produk</button></div>
</form>
<ul id="listProduk" class="list-group"></ul>

  </div>  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyA_L6U3HKM1DnKuq_Q1zKFH4bk8GMAz210",
      authDomain: "asdarstoredigitalll-d89c4.firebaseapp.com",
      databaseURL: "https://asdarstoredigitalll-default-rtdb.firebaseio.com",
      projectId: "asdarstoredigitalll-d89c4",
      storageBucket: "asdarstoredigitalll.appspot.com",
      messagingSenderId: "220670500351",
      appId: "1:220670500351:web:5737ae5958a6f5a67d5bca"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const fiturRef = db.ref('fitur');
    const halamanRef = db.ref('halaman');
    const produkRef = db.ref('produk');

    // Load fitur awal
    fiturRef.once('value').then(snap => {
      const d = snap.val() || {};
      document.getElementById('showTestimoni').checked = d.showTestimoni;
      document.getElementById('showCekStatus').checked = d.showCekStatus;
      document.getElementById('metodePembayaran').value = (d.metodePembayaran || []).join(',');
    });
    halamanRef.once('value').then(snap => {
      const d = snap.val() || {};
      document.getElementById('banner').value = d.banner || '';
      document.getElementById('note').value = d.note || '';
    });

    // Simpan fitur
    document.getElementById('formPengaturan').addEventListener('submit', e => {
      e.preventDefault();
      fiturRef.set({
        showTestimoni: document.getElementById('showTestimoni').checked,
        showCekStatus: document.getElementById('showCekStatus').checked,
        metodePembayaran: document.getElementById('metodePembayaran').value.split(',').map(m => m.trim())
      });
      halamanRef.set({
        banner: document.getElementById('banner').value,
        note: document.getElementById('note').value
      });
      alert('✅ Pengaturan disimpan.');
    });

    // Tambah produk
    document.getElementById('formProduk').addEventListener('submit', e => {
      e.preventDefault();
      const kategori = document.getElementById('kategori').value;
      const nama = document.getElementById('namaProduk').value;
      const harga = parseInt(document.getElementById('harga').value);
      const deskripsi = document.getElementById('deskripsi').value;
      produkRef.child(`${kategori}/${nama}`).set({ harga, deskripsi, aktif: true }).then(() => {
        alert('✅ Produk disimpan.');
        tampilProduk();
        e.target.reset();
      });
    });

    // Tampil produk
    function tampilProduk() {
      produkRef.once('value').then(snap => {
        const list = document.getElementById('listProduk');
        list.innerHTML = '';
        const data = snap.val() || {};
        for (let kat in data) {
          for (let nama in data[kat]) {
            const p = data[kat][nama];
            const li = document.createElement('li');
            li.className = 'list-group-item d-flex justify-content-between';
            li.innerHTML = `<div>
              <b>${kat} > ${nama}</b><br/>Rp${p.harga} - ${p.deskripsi} - ${p.aktif ? '✅ Aktif' : '⛔ Tidak Aktif'}</div>
              <div>
                <button class="btn btn-sm btn-warning me-1" onclick="toggleAktif('${kat}','${nama}',${!p.aktif})">🔁</button>
                <button class="btn btn-sm btn-danger" onclick="hapusProduk('${kat}','${nama}')">🗑️</button>
              </div>`;
            list.appendChild(li);
          }
        }
      });
    }

    function hapusProduk(k, n) {
      if (confirm(`Hapus produk ${n}?`)) produkRef.child(`${k}/${n}`).remove().then(tampilProduk);
    }
    function toggleAktif(k, n, status) {
      produkRef.child(`${k}/${n}/aktif`).set(status).then(tampilProduk);
    }

    tampilProduk();
  </script></body>
</html>
<!-- END admin.html -->
