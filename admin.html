<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Super Admin - Asdar Store</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <style>
    body { padding: 20px; background: #f0f2f5; font-family: 'Poppins', sans-serif; }
    h1 { margin-bottom: 30px; }
    textarea { font-family: monospace; font-size: 14px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Super Admin Dashboard - Asdar Store</h1><div class="mb-4">
  <h4>1. Update QR/Promo/Teks Dinamis</h4>
  <form id="formKonten">
    <input class="form-control mb-2" type="text" id="qrDana" placeholder="Link QR Dana" />
    <input class="form-control mb-2" type="text" id="qrShopee" placeholder="Link QR ShopeePay" />
    <textarea class="form-control mb-2" id="textPromo" placeholder="Teks Promo atau Banner"></textarea>
    <button class="btn btn-success">Simpan Konten</button>
  </form>
</div>

<hr/>
<div class="mb-4">
  <h4>2. Tambah Field Dinamis di Form Pemesanan</h4>
  <form id="formField">
    <input class="form-control mb-2" type="text" id="fieldId" placeholder="ID Field (misal: referral)" required />
    <input class="form-control mb-2" type="text" id="fieldLabel" placeholder="Label (misal: Kode Referral)" required />
    <select class="form-select mb-2" id="fieldType">
      <option value="text">Input Text</option>
      <option value="textarea">Textarea</option>
    </select>
    <select class="form-select mb-2" id="fieldRequired">
      <option value="true">Wajib Diisi</option>
      <option value="false">Tidak Wajib</option>
    </select>
    <button class="btn btn-primary">Tambah Field</button>
  </form>
  <ul id="listField" class="mt-3 list-group"></ul>
</div>

<hr/>
<div>
  <h4>3. Kontrol Tampilan Otomatis Berdasarkan Produk</h4>
  <form id="formLogic">
    <input class="form-control mb-2" id="produkKey" placeholder="Nama Produk (misal: Paket Data)" required />
    <input class="form-control mb-2" id="showFields" placeholder="Tampilkan Field (pisah koma)" />
    <input class="form-control mb-2" id="hideFields" placeholder="Sembunyikan Field (pisah koma)" />
    <button class="btn btn-warning">Simpan Logika</button>
  </form>
  <ul id="listLogic" class="mt-3 list-group"></ul>
</div>

  </div>  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyA_L6U3HKM1DnKuq_Q1zKFH4bk8GMAz210",
      authDomain: "asdarstoredigitalll-d89c4.firebaseapp.com",
      databaseURL: "https://asdarstoredigitalll-d89c4-default-rtdb.firebaseio.com",
      projectId: "asdarstoredigitalll-d89c4",
      storageBucket: "asdarstoredigitalll.appspot.com",
      messagingSenderId: "220670500351",
      appId: "1:220670500351:web:5737ae5958a6f5a67d5bca"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const kontenRef = db.ref('pengaturan');
    const fieldRef = db.ref('kontenDinamis/inputTambahan');
    const logicRef = db.ref('formLogic');

    // SIMPAN KONTEN
    document.getElementById('formKonten').addEventListener('submit', e => {
      e.preventDefault();
      const data = {
        qrDana: qrDana.value,
        qrShopee: qrShopee.value,
        textPromo: textPromo.value
      };
      kontenRef.set(data);
      alert('✅ Konten disimpan!');
    });

    // TAMBAH FIELD
    document.getElementById('formField').addEventListener('submit', e => {
      e.preventDefault();
      const field = {
        id: fieldId.value.trim(),
        label: fieldLabel.value.trim(),
        type: fieldType.value,
        required: fieldRequired.value === 'true'
      };
      fieldRef.push(field);
      alert('✅ Field ditambahkan!');
    });

    // TAMPILKAN FIELD
    fieldRef.on('value', snap => {
      const data = snap.val() || {};
      listField.innerHTML = '';
      Object.entries(data).forEach(([key, val]) => {
        listField.innerHTML += `<li class='list-group-item'>${val.label} (${val.type}) - ${val.required ? 'Wajib' : 'Opsional'}</li>`;
      });
    });

    // SIMPAN LOGIKA
    document.getElementById('formLogic').addEventListener('submit', e => {
      e.preventDefault();
      const key = produkKey.value.trim();
      const logic = {
        tampilkan: showFields.value.split(',').map(x => x.trim()).filter(x => x),
        sembunyikan: hideFields.value.split(',').map(x => x.trim()).filter(x => x)
      };
      logicRef.child(key).set(logic);
      alert('✅ Logika disimpan!');
    });

    // TAMPILKAN LOGIKA
    logicRef.on('value', snap => {
      const data = snap.val() || {};
      listLogic.innerHTML = '';
      Object.entries(data).forEach(([produk, val]) => {
        listLogic.innerHTML += `<li class='list-group-item'><b>${produk}</b> → Show: ${val.tampilkan.join(', ')} | Hide: ${val.sembunyikan.join(', ')}</li>`;
      });
    });
  </script></body>
</html>
