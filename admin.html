<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - Asdar Store</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body { padding: 20px; background: #f4f4f4; font-family: 'Poppins', sans-serif; }
    h1 { margin-bottom: 20px; }
    textarea { width: 100%; min-height: 80px; }
    .section { background: #fff; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <div class="container">
    <h1>Dashboard Admin - Asdar Store</h1><div class="section">
  <h4>Pengaturan Umum</h4>
  <div class="form-check">
    <input class="form-check-input" type="checkbox" id="fiturStatus" />
    <label class="form-check-label" for="fiturStatus">Tampilkan Cek Status Pesanan</label>
  </div>
  <div class="form-check">
    <input class="form-check-input" type="checkbox" id="fiturTesti" />
    <label class="form-check-label" for="fiturTesti">Tampilkan Testimoni Pelanggan</label>
  </div>
  <label class="mt-3">Banner Promo:</label>
  <textarea id="banner" placeholder="Contoh: Promo Juli Diskon 10% untuk semua produk!"></textarea>
  <button class="btn btn-success mt-2" onclick="simpanPengaturan()">Simpan Pengaturan</button>
</div>

<div class="section">
  <h4>Fitur Bebas (Custom Section)</h4>
  <div class="input-group mb-2">
    <input type="text" class="form-control" id="judulFitur" placeholder="Judul Fitur (misal: Cara Bayar)" />
  </div>
  <div class="mb-2">
    <textarea id="isiFitur" placeholder="Isi HTML fitur bebas di sini"></textarea>
  </div>
  <button class="btn btn-primary" onclick="tambahFitur()">Tambah / Perbarui Fitur</button>
  <ul class="list-group mt-3" id="daftarFitur"></ul>
</div>

  </div>  <!-- Firebase -->  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyA_L6U3HKM1DnKuq_Q1zKFH4bk8GMAz210",
      authDomain: "asdarstoredigitalll-d89c4.firebaseapp.com",
      databaseURL: "https://asdarstoredigitalll-default-rtdb.firebaseio.com",
      projectId: "asdarstoredigitalll-d89c4",
      storageBucket: "asdarstoredigitalll.appspot.com",
      messagingSenderId: "220670500351",
      appId: "1:220670500351:web:5737ae5958a6f5a67d5bca"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function simpanPengaturan() {
      const data = {
        fiturStatus: document.getElementById("fiturStatus").checked,
        fiturTesti: document.getElementById("fiturTesti").checked,
        banner: document.getElementById("banner").value.trim()
      };
      db.ref("pengaturan").set(data).then(() => alert("✅ Pengaturan disimpan!"));
    }

    function tambahFitur() {
      const judul = document.getElementById("judulFitur").value.trim();
      const isi = document.getElementById("isiFitur").value.trim();
      if (!judul || !isi) return alert("❗ Judul dan isi wajib diisi");
      db.ref("fiturCustom/" + judul).set(isi).then(() => {
        alert("✅ Fitur ditambahkan");
        tampilkanFitur();
        document.getElementById("judulFitur").value = "";
        document.getElementById("isiFitur").value = "";
      });
    }

    function hapusFitur(judul) {
      if (confirm("Hapus fitur " + judul + "?")) {
        db.ref("fiturCustom/" + judul).remove().then(() => {
          alert("✅ Fitur dihapus");
          tampilkanFitur();
        });
      }
    }

    function tampilkanFitur() {
      db.ref("fiturCustom").once("value").then(snap => {
        const list = document.getElementById("daftarFitur");
        list.innerHTML = "";
        const data = snap.val() || {};
        for (let j in data) {
          const li = document.createElement("li");
          li.className = "list-group-item d-flex justify-content-between";
          li.innerHTML = `<div><b>${j}</b></div><button class='btn btn-danger btn-sm' onclick="hapusFitur('${j}')">Hapus</button>`;
          list.appendChild(li);
        }
      });
    }

    // Load pengaturan awal
    db.ref("pengaturan").once("value").then(snap => {
      const data = snap.val() || {};
      document.getElementById("fiturStatus").checked = data.fiturStatus || false;
      document.getElementById("fiturTesti").checked = data.fiturTesti || false;
      document.getElementById("banner").value = data.banner || "";
    });

    tampilkanFitur();
  </script></body>
</html>
