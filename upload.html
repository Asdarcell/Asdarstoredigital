<!DOCTYPE html>
<html>
<head>
  <title>Test Upload Base64</title>
</head>
<body>
  <h2>ğŸ§ª Test Upload .JPG ke FreeImage.host</h2>
  <input type="file" id="fileInput" accept="image/*" />
  <button onclick="upload()">Upload Sekarang</button>
  <pre id="output">Status di sini...</pre>

  <script>
    async function upload() {
      const file = document.getElementById("fileInput").files[0];
      if (!file) return alert("Pilih gambar dulu");

      const output = document.getElementById("output");
      output.innerText = "â³ Mengubah ke base64...";

      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64 = reader.result.split(",")[1];
        const formData = new FormData();
        formData.append("key", "6d207e02198a847aa98d0a2a901485a5"); // API key kamu
        formData.append("source", base64);
        formData.append("format", "json");

        output.innerText = "â³ Uploading ke FreeImage.host...";

        try {
          const res = await fetch("https://freeimage.host/api/1/upload", {
            method: "POST",
            body: formData
          });
          const json = await res.json();
          console.log("ğŸ“¦ Respon FreeImage:", json);

          if (json.status_code === 200) {
            output.innerHTML = `âœ… <b>Berhasil!</b><br>
              <a href="${json.image.display_url}" target="_blank">${json.image.display_url}</a><br>
              <img src="${json.image.display_url}" width="200" />`;
          } else {
            output.innerText = "âŒ Gagal: " + (json.error?.message || "Tidak diketahui");
          }
        } catch (e) {
          output.innerText = "âŒ ERROR: " + e.message;
        }
      };

      reader.readAsDataURL(file);
    }
  </script>
</body>
</html>
