<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Asdar Store Digital</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    * {
      margin: 0; padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    body {
      background: #f3f9ff;
      color: #333;
      padding: 16px;
    }

    header {
      text-align: center;
      padding: 20px;
    }

    header h1 {
      font-size: 2em;
      color: #007BFF;
    }

    header p {
      font-size: 1em;
      color: #666;
    }

    .card {
      background: #fff;
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
      margin-bottom: 24px;
    }

    .card h2 {
      font-size: 1.2em;
      margin-bottom: 8px;
    }

    .btn {
      background: #007BFF;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 12px;
    }

    .btn:hover {
      background: #0056b3;
    }

    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    .testimoni-list {
      max-height: 200px;
      overflow-y: auto;
      margin-top: 12px;
    }

    .testimoni-item {
      background: #eef4ff;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 8px;
    }

    #previewImage {
      margin-top: 10px;
      max-width: 100%;
      border-radius: 8px;
    }

    .payment-box {
      background: #d8e3ff;
      padding: 12px;
      border-radius: 12px;
      text-align: center;
      margin-top: 12px;
      font-weight: bold;
      color: #333;
      line-height: 1.6;
    }

    footer {
      text-align: center;
      margin-top: 32px;
      color: #888;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

  <header>
    <h1>Asdar Store Digital</h1>
    <p>Cepat, Aman, Terpercaya</p>
  </header>

  <!-- Produk -->
  <section class="card">
    <h2>Produk Voucher</h2>
    <select id="kategoriProduk" onchange="updateVarian()">
      <option value="">Pilih kategori...</option>
      <option value="kvision">K-Vision</option>
      <option value="nex">Nex Parabola</option>
      <option value="mnc">MNC Vision</option>
    </select>
    <select id="varianProduk">
      <option value="">Pilih paket...</option>
    </select>
    <button class="btn" onclick="pesanSekarang()">Pesan Sekarang</button>
  </section>

  <!-- Upload bukti -->
  <section class="card" id="uploadSection" style="display:none;">
    <h2>Upload Bukti Pembayaran</h2>
    <input type="file" id="buktiBayar" accept="image/*" onchange="previewImage(event)" />
    <img id="previewImage" />
    <div class="payment-box">
      ðŸŸ£ PAYMENT ðŸŸ£<br/>
      ShopeePay: 081803004607<br/>
      DANA: 087755432880
    </div>
    <button class="btn" onclick="uploadGambar()">Kirim ke WhatsApp</button>
  </section>

  <!-- Testimoni -->
  <section class="card">
    <h2>Testimoni Pelanggan</h2>
    <textarea id="inputTesti" placeholder="Tulis testimoni Anda..."></textarea>
    <button class="btn" onclick="kirimTestimoni()">Kirim Testimoni</button>
    <div class="testimoni-list" id="listTestimoni">
    </div>
  </section>

  <footer>
    &copy; 2025 Asdar Store Digital
  </footer>

  <script>
    const testimoniNegatif = ["jelek", "penipu", "bohong", "gagal", "tidak sesuai", "buruk"];
    const hargaProduk = {
      "K-Vision|Cling 30 Hari": 30000,
      "K-Vision|Liga 1": 35000,
      "K-Vision|Timnas": 30000,
      "K-Vision|Paket Film": 40000,
      "Nex Parabola|Basic 30 Hari": 35000,
      "Nex Parabola|Basic 90 Hari": 90000,
      "MNC Vision|Jawara 30 Hari": 40000,
      "MNC Vision|Timnas": 35000
    };

    function updateVarian() {
      const varian = document.getElementById("varianProduk");
      const kategori = document.getElementById("kategoriProduk").value;
      varian.innerHTML = "";
      let opsi = [];
      if (kategori === "kvision") opsi = ["Cling 30 Hari", "Liga 1", "Timnas", "Paket Film"];
      if (kategori === "nex") opsi = ["Basic 30 Hari", "Basic 90 Hari"];
      if (kategori === "mnc") opsi = ["Jawara 30 Hari", "Timnas"];
      opsi.forEach(v => {
        const opt = document.createElement("option");
        opt.value = v;
        opt.textContent = v;
        varian.appendChild(opt);
      });
    }

    let hargaTerpilih = 0;
    let produkTerpilih = "";

    function pesanSekarang() {
      const kategori = document.getElementById("kategoriProduk").value;
      const varian = document.getElementById("varianProduk").value;
      if (!kategori || !varian) {
        alert("Pilih kategori dan varian terlebih dahulu.");
        return;
      }

      const namaKategori = kategori === "kvision" ? "K-Vision" : kategori === "nex" ? "Nex Parabola" : "MNC Vision";
      const key = `${namaKategori}|${varian}`;
      const harga = hargaProduk[key] || 0;

      if (harga === 0) {
        alert("Harga belum tersedia.");
        return;
      }

      produkTerpilih = `${namaKategori} - ${varian}`;
      hargaTerpilih = harga;

      alert(`Silakan bayar Rp${harga.toLocaleString()} ke DANA 087755432880.\nSetelah itu upload bukti pembayaran.`);

      document.getElementById("uploadSection").style.display = "block";
      document.getElementById("uploadSection").scrollIntoView({ behavior: "smooth" });
    }

    function previewImage(event) {
      const image = document.getElementById('previewImage');
      image.src = URL.createObjectURL(event.target.files[0]);
    }

    function uploadGambar() {
      const file = document.getElementById("buktiBayar").files[0];
      if (!file) return alert("Upload gambar terlebih dahulu.");

      const formData = new FormData();
      formData.append("image", file);

      fetch("https://api.imgbb.com/1/upload?key=f71ccc1a662c9f8656766990018d3a33", {
        method: "POST",
        body: formData
      })
      .then(res => res.json())
      .then(data => {
        const linkGambar = data.data.url;
        const pesan = `Halo Admin, saya sudah bayar sebesar Rp${hargaTerpilih.toLocaleString()} untuk ${produkTerpilih}. Berikut bukti pembayaran:\n${linkGambar}`;
        const nomorWA = "081803004607";
        window.open(`https://wa.me/${nomorWA}?text=${encodeURIComponent(pesan)}`, "_blank");
      })
      .catch(() => alert("Gagal upload gambar."));
    }

    function kirimTestimoni() {
      const isi = document.getElementById("inputTesti").value.toLowerCase();
      if (!isi) return;

      const dilarang = testimoniNegatif.some(kata => isi.includes(kata));
      if (dilarang) return alert("Testimoni mengandung kata negatif.");

      const div = document.createElement("div");
      div.className = "testimoni-item";
      div.textContent = isi;
      document.getElementById("listTestimoni").prepend(div);
      document.getElementById("inputTesti").value = "";
    }
  </script>

</body>
</html>
