<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Asdar Store Digital</title>
  <link rel="icon" href="favicon.png" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <style>
    /* Variabel Tema */
    :root {
      --bg: #f9f9f9;
      --text: #2c3e50;
      --primary: #3498db;
      --card: #ffffff;
      --border: #ddd;
      --shadow: rgba(0, 0, 0, 0.05);
    }

    [data-theme="dark"] {
      --bg: #1a1a2e;
      --text: #e0e0e0;
      --primary: #1abc9c;
      --card: #2c2c40;
      --border: #444;
      --shadow: rgba(0, 0, 0, 0.15);
    }

    /* General Styles */
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: all 0.3s ease;
      margin: 0;
      line-height: 1.6;
    }

    header {
      position: sticky;
      top: 0;
      background: var(--card);
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border);
      z-index: 999;
      transition: box-shadow 0.3s ease;
    }

    header.scrolled {
      box-shadow: 0 4px 12px var(--shadow);
    }

    header h1 {
      margin: 0;
      font-size: 24px;
      color: var(--primary);
    }

    .theme-btn {
      background: transparent;
      border: none;
      font-size: 22px;
      cursor: pointer;
      color: var(--text);
      transition: color 0.3s ease;
    }

    .theme-btn:hover {
      color: var(--primary);
    }

    main {
      max-width: 700px;
      margin: 20px auto;
      padding: 0 20px;
    }

    /* Form & Input Styles */
    label {
      font-weight: 600;
      margin-top: 15px;
      display: block;
      color: var(--text);
    }

    input,
    select,
    textarea {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      margin-bottom: 15px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background-color: var(--card);
      color: var(--text);
      transition: border-color 0.3s ease, background-color 0.3s ease;
    }

    input:focus,
    select:focus,
    textarea:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
    }

    button {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      border-radius: 8px;
      border: none;
      background: var(--primary);
      color: white;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    button:hover {
      opacity: 0.9;
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0);
    }

    /* Info Box */
    .info {
      background: var(--card);
      padding: 15px;
      margin-top: 20px;
      border-left: 5px solid var(--primary);
      border-radius: 8px;
      box-shadow: 0 2px 8px var(--shadow);
    }

    /* --- [BARU] Gaya untuk Fitur Diskon & Promo --- */
    .order-card {
        background: var(--card);
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px var(--shadow);
        border: 1px solid var(--border);
    }
    .small-text {
        font-size: 0.9em;
        opacity: 0.9;
    }
    .wa-link {
        font-weight: bold;
        color: var(--primary);
    }
    #claim-discount-section button {
        background-color: #28a745;
    }
    #claim-discount-section button:disabled {
        background-color: #6c757d;
        cursor: not-allowed;
    }
    #promo-section button {
        background-color: #17a2b8;
    }

    /* --- Testimonial Chat Style --- */
    #testimoniContainer {
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      height: 400px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 4px 12px var(--shadow);
      border: 1px solid var(--border);
    }

    .testimonial-bubble {
      background-color: var(--primary);
      color: white;
      padding: 10px 15px;
      border-radius: 20px 20px 20px 5px;
      margin-bottom: 15px;
      max-width: 80%;
      align-self: flex-start;
      opacity: 0;
      animation: slideInUp 0.5s ease-out forwards, fadeOut 0.5s ease-in 10s forwards;
    }

    .testimonial-bubble b {
      display: block;
      font-size: 0.9em;
      opacity: 0.8;
    }

    @keyframes slideInUp {
      from {
        transform: translateY(50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
        height: 0;
        padding: 0;
        margin: 0;
        border: 0;
      }
    }

    /* Result Section */
    #hasil {
      margin-top: 30px;
      background: var(--card);
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px var(--shadow);
    }

    .qr-btn {
      margin-top: 15px;
      padding: 12px 20px;
      text-align: center;
      border-radius: 8px;
      text-decoration: none;
      display: inline-block;
      width: calc(50% - 10px);
      font-weight: bold;
      transition: background-color 0.3s ease, transform 0.2s ease;
      color: white !important;
    }

    .qr-btn.upload {
      background: #28a745;
    }

    .qr-btn.status {
      background: #17a2b8;
    }

    .qr-btn:hover {
      opacity: 0.9;
    }

    hr {
      margin: 40px 0;
      border: 0;
      border-top: 1px solid var(--border);
    }

    h2 {
      color: var(--primary);
      margin-top: 30px;
      margin-bottom: 20px;
      text-align: center;
    }

    .section-container {
      background: var(--card);
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 12px var(--shadow);
      margin-top: 20px;
    }

    /* --- FAQ Section Style --- */
    .faq-item {
      border-bottom: 1px solid var(--border);
      padding: 15px 0;
    }

    .faq-item:last-child {
      border-bottom: none;
    }

    .faq-question {
      cursor: pointer;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .faq-question::after {
      content: '▼';
      font-size: 12px;
      transition: transform 0.3s ease;
    }

    .faq-answer {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding-top 0.3s ease;
      padding-top: 0;
    }

    .faq-item.active .faq-answer {
      padding-top: 15px;
      max-height: 200px;
    }

    .faq-item.active .faq-question::after {
      transform: rotate(180deg);
    }
  </style>
</head>

<body data-theme="light">
  <header id="header">
    <h1>Asdar Store Digital</h1>
    <button class="theme-btn" onclick="toggleTheme()" id="themeToggle">🌙</button>
  </header>

  <main id="main-content">
    <div data-aos="fade-up" class="section-container">
      <form id="formPesanan">
        <label for="nama">Nama Lengkap</label>
        <input type="text" id="nama" placeholder="Cth: Budi Santoso" required />
        <label for="nomor">Nomor HP / ID Game</label>
        <input type="text" id="nomor" placeholder="Cth: 081234567890 atau ID Game Anda" required />
        <label for="waAktif">Nomor WhatsApp Aktif</label>
        <input type="tel" id="waAktif" placeholder="Cth: 081234567890" pattern="^(08|62)[0-9]{8,15}$" required />
        
        <div id="claim-discount-section" class="order-card" style="display: none; margin-top: 20px; background-color: #e8f5e9;">
            <h3>🎉 Selamat! Anda Punya Hak Diskon!</h3>
            <p>Anda berhak mendapatkan potongan <strong>Rp 5.000</strong> untuk pesanan kali ini.</p>
            <button id="claim-button" type="button" onclick="gunakanDiskon()">✅ Ya, Gunakan Diskon</button>
        </div>

        <label for="kategori">Kategori Produk</label>
        <select id="kategori" required>
          <option value="">Pilih Kategori</option>
        </select>
        <label for="produk">Produk</label>
        <select id="produk" required>
          <option value="">Pilih Produk</option>
        </select>
        <div class="info" id="infoProduk">Harga dan deskripsi akan muncul di sini.</div>
        <button type="submit">Pesan Sekarang</button>
      </form>
    </div>

    <div id="hasil" style="display: none;"></div>
    
    <div id="promo-section" class="order-card" style="display: none; margin-top: 20px; border: 2px dashed #4CAF50;">
        <h3>Mau Diskon <strong>Rp 5.000</strong> di Pesanan Berikutnya?</h3>
        <p class="small-text">Caranya mudah! Cukup bagikan pesan promo di bawah ini ke <strong>2 grup WhatsApp</strong>, lalu kirim screenshot-nya ke WA Admin untuk verifikasi.</p>
        <button type="button" onclick="bagikanPromo()">🚀 Bagikan Promo Sekarang</button>
        <p style="margin-top: 15px;">Kirim bukti screenshot ke Admin di nomor ini:</p>
        <a id="admin-wa-link" href="#" target="_blank" class="wa-link">Chat Admin untuk Verifikasi</a>
    </div>

    <hr>

    <div data-aos="fade-up">
      <h2>Testimoni Pelanggan Kami</h2>
      <div id="testimoniContainer">
      </div>
    </div>

    <div data-aos="fade-up" class="section-container">
      <h2>Beri Kami Testimoni</h2>
      <form id="formTestimoni">
        <label for="testiNama">Nama Anda</label>
        <input type="text" id="testiNama" placeholder="Nama Anda" required>
        <label for="testiPesan">Pesan Anda</label>
        <textarea id="testiPesan" rows="4" placeholder="Bagaimana pengalaman Anda berbelanja di sini?" required></textarea>
        <button type="submit">Kirim Testimoni</button>
        <p id="testiStatus" style="text-align:center; margin-top:10px;"></p>
      </form>
    </div>

    <hr>

    <div data-aos="fade-up">
      <h2>Ada Pertanyaan?</h2>
      <div class="section-container" id="faq-container">
      </div>
    </div>

    <hr>

    <div data-aos="fade-up" class="section-container">
      <h2>Cek Status Pesanan Anda</h2>
      <form onsubmit="event.preventDefault(); cekStatus();">
        <label for="idCek">Masukkan ID Pesanan</label>
        <input type="text" id="idCek" placeholder="Cth: P16789..." required />
        <button type="submit">Cek Status</button>
      </form>
    </div>

    <div id="dynamic-content-area" style="margin-top: 20px;"></div>
  </main>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-functions.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init({
      duration: 800,
      once: true,
      offset: 50,
    });

    const firebaseConfig = {
        apiKey: "AIzaSyA_L6U3HKM1DnKuq_Q1zKFH4bk8GMAz210",
        authDomain: "asdarstoredigitalll-d89c4.firebaseapp.com",
        databaseURL: "https://asdarstoredigitalll-d89c4-default-rtdb.firebaseio.com",
        projectId: "asdarstoredigitalll-d89c4",
        storageBucket: "asdarstoredigitalll.appspot.com",
        messagingSenderId: "220670500351",
        appId: "1:220670500351:web:5737ae5958a6f5a67d5bca"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const functions = firebase.functions();

    const ADMIN_WA_NUMBER = "6281803004607";
    const ADMIN_PANEL_LINK = "https://asdarcell.github.io/Asdarstoredigital/admin.html";

    // --- [BARU] Variabel untuk fitur diskon ---
    const POTONGAN_DISKON = 5000;
    let diskonDiterapkan = false; // Status apakah diskon sudah diklaim untuk pesanan ini
    let hargaAsli = 0; // Menyimpan harga asli produk yang dipilih

    const kategoriSelect = document.getElementById('kategori');
    const produkSelect = document.getElementById('produk');
    const infoProduk = document.getElementById('infoProduk');
    const hasilDiv = document.getElementById('hasil');

    const formatRupiah = (angka) => angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    const normalizePhone = (num) => {
      if (!num) return '';
      let n = String(num).replace(/[^0-9]/g, '');
      if (n.startsWith('0')) n = '62' + n.slice(1);
      return n;
    };
    window.toggleTheme = () => {
      const theme = document.body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      document.body.setAttribute('data-theme', theme);
      document.getElementById('themeToggle').textContent = theme === 'light' ? '🌙' : '☀️';
      localStorage.setItem('theme', theme);
    };
    if (localStorage.getItem('theme')) {
      document.body.setAttribute('data-theme', localStorage.getItem('theme'));
      document.getElementById('themeToggle').textContent = localStorage.getItem('theme') === 'light' ? '🌙' : '☀️';
    }

    window.addEventListener('scroll', () => {
      const header = document.getElementById('header');
      if (window.scrollY > 10) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });

    async function sendWhatsApp(to, message) {
      try {
        const sendWaMessage = functions.httpsCallable('sendWaMessage');
        await sendWaMessage({
          to,
          message
        });
      } catch (error) {
        console.error("Gagal memanggil Cloud Function:", error);
      }
    }

    db.ref('produk').once('value').then(snapshot => {
      const data = snapshot.val() || {};
      kategoriSelect.innerHTML = '<option value="">Pilih Kategori</option>';
      for (let kategori in data) {
        kategoriSelect.innerHTML += `<option value="${kategori}">${kategori}</option>`;
      }
    });

    kategoriSelect.addEventListener('change', () => {
      produkSelect.innerHTML = '<option value="">Pilih Produk</option>';
      infoProduk.innerHTML = 'Harga dan deskripsi akan muncul di sini.';
      const kategori = kategoriSelect.value;
      if (!kategori) return;
      db.ref(`produk/${kategori}`).once('value').then(snapshot => {
        const data = snapshot.val() || {};
        for (let nama in data) {
          produkSelect.innerHTML += `<option value="${nama}">${nama}</option>`;
        }
      });
    });

    produkSelect.addEventListener('change', () => {
      const kategori = kategoriSelect.value;
      const produk = produkSelect.value;
      if (!produk || !kategori) return;
      db.ref(`produk/${kategori}/${produk}`).once('value').then(snapshot => {
        const data = snapshot.val();
        if (data) {
          hargaAsli = data.harga; // Simpan harga asli produk
          infoProduk.innerHTML = `<b>Harga:</b> Rp${formatRupiah(data.harga)}<br><b>Deskripsi:</b> ${data.deskripsi || data.cara || '-'}`;
        }
      });
    });
    
    // --- [BARU] Logika Fitur Diskon & Promo ---

    // 1. Cek status diskon saat pengguna mengetik nomor WA
    document.getElementById('waAktif').addEventListener('input', async () => {
        if (diskonDiterapkan) return; // Jangan cek lagi jika diskon sudah diklaim

        const nomorWA = normalizePhone(document.getElementById('waAktif').value);
        const claimSection = document.getElementById('claim-discount-section');
        
        // Cek jika nomor WA valid (misal, panjangnya > 10)
        if (nomorWA && nomorWA.length > 10) {
            try {
                const snapshot = await db.ref('hakDiskon/' + nomorWA).once('value');
                if (snapshot.exists() && snapshot.val() === true) {
                    claimSection.style.display = 'block';
                } else {
                    claimSection.style.display = 'none';
                }
            } catch (error) {
                console.error("Gagal cek hak diskon:", error);
                claimSection.style.display = 'none';
            }
        } else {
            claimSection.style.display = 'none';
        }
    });

    // 2. Fungsi saat tombol "Gunakan Diskon" diklik
    function gunakanDiskon() {
        diskonDiterapkan = true;
        const hargaSetelahDiskon = hargaAsli - POTONGAN_DISKON;
        
        infoProduk.innerHTML = `<b>Harga Asli:</b> <del>Rp${formatRupiah(hargaAsli)}</del><br>
                               <b>Harga Spesial: Rp${formatRupiah(hargaSetelahDiskon)}</b><br>
                               (Diskon Rp${formatRupiah(POTONGAN_DISKON)} diterapkan)`;
        
        const claimButton = document.getElementById('claim-button');
        claimButton.disabled = true;
        claimButton.innerText = "✅ Diskon Telah Diterapkan";
    }

    // 3. Fungsi untuk tombol "Bagikan Promo"
    function bagikanPromo() {
        const pesanPromo = "Wah, ada promo menarik nih di Asdar Store Digital! Produknya lengkap dan harganya pas di kantong. Yuk pesen juga!"; // Anda bisa sesuaikan ini
        const linkWA = `https://api.whatsapp.com/send?text=${encodeURIComponent(pesanPromo)}`;
        window.open(linkWA, '_blank');
    }


    document.getElementById('formPesanan').addEventListener('submit', async e => {
      e.preventDefault();
      const nama = document.getElementById('nama').value.trim();
      const nomor = document.getElementById('nomor').value.trim();
      const waAktif = normalizePhone(document.getElementById('waAktif').value.trim());
      const kategori = kategoriSelect.value;
      const produk = produkSelect.value;
      const waktu = new Date().toISOString();
      const id = "P" + Date.now();

      if (!nama || !nomor || !waAktif || !kategori || !produk) return alert("Harap lengkapi semua field!");

      try {
        const snapProduk = await db.ref(`produk/${kategori}/${produk}`).once('value');
        const dataProduk = snapProduk.val();
        if (!dataProduk) return alert("Produk tidak valid.");
        
        // --- [BARU] Kalkulasi harga final dengan diskon ---
        let hargaFinal = dataProduk.harga || 0;
        let adaDiskon = false;
        if (diskonDiterapkan && hargaAsli === dataProduk.harga) {
            hargaFinal -= POTONGAN_DISKON;
            adaDiskon = true;
        }

        await db.ref('pesanan/' + id).set({
          nama,
          nomor,
          kategori,
          produk,
          harga: hargaFinal, // Simpan harga final
          waktu,
          wa_aktif: waAktif,
          status: 'Belum Bayar',
          diskon_digunakan: adaDiskon // Tandai jika diskon dipakai
        });
        
        // --- [BARU] Hapus hak diskon dari database setelah pesanan berhasil dibuat ---
        if (adaDiskon) {
            await db.ref('hakDiskon/' + waAktif).remove();
        }

        hasilDiv.style.display = 'block';
        hasilDiv.innerHTML = `
                <p class="text-success fw-bold">✅ Pesanan Anda berhasil dibuat!</p>
                <p><b>ID Pesanan Anda:</b> <code>${id}</code></p>
                <div class="info">
                    ${adaDiskon ? `<p>Harga Normal: <del>Rp${formatRupiah(hargaAsli)}</del></p>` : ''}
                    <p><strong>Silakan lakukan pembayaran sejumlah Rp${formatRupiah(hargaFinal)}</strong> ke salah satu tujuan berikut:</p>
                    <ul class="list-unstyled">
                        <li><strong>ShopeePay:</strong> 081803004607</li>
                        <li><strong>Dana:</strong> 087755432880</li>
                    </ul>
                </div>
                <a class='qr-btn upload' href="uplod.html?id=${id}">📤 Upload Bukti</a>
                <a class='qr-btn status' href="status.html?id=${id}">📄 Cek Status</a>
                `;
        
        // --- [BARU] Tampilkan bagian promo setelah berhasil order ---
        document.getElementById('promo-section').style.display = 'block';
        document.getElementById('admin-wa-link').href = `https://wa.me/${ADMIN_WA_NUMBER}?text=Halo%20Admin,%20ini%20bukti%20screenshot%20share%20promo%20saya%20untuk%20pesanan%20ID%20${id}.`;

        document.getElementById('formPesanan').reset();
        document.getElementById('claim-discount-section').style.display = 'none'; // Sembunyikan lagi
        diskonDiterapkan = false; // Reset status diskon
        window.scrollTo(0, document.getElementById('hasil').offsetTop); 

        const pesanAdmin = `📦 Pesanan Baru!\n\nID: *${id}*\nNama: ${nama}\nWA: ${waAktif}\nProduk: ${produk}\nHarga: Rp${formatRupiah(hargaFinal)} ${adaDiskon ? '(Diskon)' : ''}\n\nCek di Admin Panel:\n${ADMIN_PANEL_LINK}`;
        await sendWhatsApp(ADMIN_WA_NUMBER, pesanAdmin);
        alert("Pesanan berhasil dibuat!");
      } catch (error) {
        console.error("Error:", error);
        alert("Terjadi kesalahan.");
      }
    });

    window.cekStatus = () => {
      const id = document.getElementById('idCek').value.trim();
      if (id) window.location.href = `status.html?id=${id}`;
      else alert("Masukkan ID Pesanan.");
    };

    // --- Logika Testimoni Baru ---
    const testimoniContainer = document.getElementById('testimoniContainer');
    let testimoniDijalankan = false;

    function tampilkanSatuTesti(testimoni) {
      const bubble = document.createElement('div');
      bubble.className = 'testimonial-bubble';
      bubble.innerHTML = `<b>${testimoni.nama || 'Anonim'}</b> ${testimoni.pesan || ''}`;

      testimoniContainer.appendChild(bubble);

      setTimeout(() => {
        if (bubble.parentElement) {
          testimoniContainer.removeChild(bubble);
        }
      }, 10500);

      testimoniContainer.scrollTop = testimoniContainer.scrollHeight;
    }

    db.ref('testimoni').on('value', snap => {
      const dataTesti = Object.values(snap.val() || {});
      if (dataTesti.length > 0 && !testimoniDijalankan) {
        testimoniDijalankan = true;
        let i = 0;
        setInterval(() => {
          tampilkanSatuTesti(dataTesti[i]);
          i = (i + 1) % dataTesti.length;
        }, 3000);
      } else if (dataTesti.length === 0) {
        testimoniContainer.innerHTML = `<p style="text-align:center;">Belum ada testimoni. Jadilah yang pertama!</p>`;
      }
    });

    document.getElementById('formTestimoni').addEventListener('submit', async (e) => {
      e.preventDefault();
      const nama = document.getElementById('testiNama').value.trim();
      const pesan = document.getElementById('testiPesan').value.trim();
      const statusEl = document.getElementById('testiStatus');

      if (!nama || !pesan) {
        statusEl.textContent = 'Nama dan pesan tidak boleh kosong!';
        statusEl.style.color = 'red';
        return;
      }

      try {
        await db.ref('testimoni_pending').push({
          nama: nama,
          pesan: pesan,
          waktu: new Date().toISOString()
        });

        statusEl.textContent = 'Terima kasih! Testimoni Anda akan kami review.';
        statusEl.style.color = 'green';
        document.getElementById('formTestimoni').reset();
      } catch (error) {
        statusEl.textContent = 'Gagal mengirim testimoni. Coba lagi.';
        statusEl.style.color = 'red';
        console.error('Error kirim testimoni:', error);
      }
    });


    // --- Logika FAQ ---
    const faqData = [{
      q: "Bagaimana cara memesan?",
      a: "Pilih kategori dan produk, isi data diri, lalu klik 'Pesan Sekarang'. Lakukan pembayaran sesuai instruksi dan unggah bukti bayar."
    }, {
      q: "Bagaimana cara mendapatkan diskon?",
      a: "Setelah pesanan pertama Anda berhasil, akan muncul penawaran untuk membagikan promo. Bagikan ke 2 grup WA, kirim screenshot ke Admin, dan Admin akan memberikan hak diskon untuk pesanan Anda berikutnya."
    }, {
      q: "Apa saja metode pembayaran yang diterima?",
      a: "Saat ini kami menerima pembayaran melalui ShopeePay dan Dana."
    }, {
      q: "Berapa lama prosesnya?",
      a: "Setelah bukti bayar diverifikasi, pesanan akan diproses secepatnya, biasanya dalam 5-15 menit pada jam kerja."
    }, {
      q: "Apakah transaksi di sini aman?",
      a: "Sangat aman. Kami menjamin kerahasiaan data Anda dan keamanan transaksi."
    }];

    const faqContainer = document.getElementById('faq-container');
    faqContainer.innerHTML = ''; // Kosongkan dulu
    faqData.forEach(item => {
      const faqItem = document.createElement('div');
      faqItem.className = 'faq-item';
      faqItem.innerHTML = `
            <div class="faq-question">${item.q}</div>
            <div class="faq-answer">${item.a}</div>
            `;
      faqContainer.appendChild(faqItem);
    });

    document.querySelectorAll('.faq-question').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.faq-item').forEach(el => {
          if (el !== item.parentElement && el.classList.contains('active')) {
            el.classList.remove('active');
          }
        });
        item.parentElement.classList.toggle('active');
      });
    });

    // --- Konten Dinamis dari Admin (jika ada) ---
    db.ref('dynamicContent/index').once('value').then(snapshot => {
      const konten = snapshot.val() || {};
      if (konten.css) {
        const styleTag = document.createElement('style');
        styleTag.textContent = konten.css;
        document.head.appendChild(styleTag);
      }
      if (konten.html) {
        document.getElementById('dynamic-content-area').innerHTML = konten.html;
      }
      if (konten.js) {
        const scriptTag = document.createElement('script');
        scriptTag.textContent = konten.js;
        document.body.appendChild(scriptTag);
      }
    });
  </script>
</body>

</html>
