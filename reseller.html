<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Minat Reseller - Asdar Store Digital</title>
    <link rel="icon" href="favicon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #f9f9f9; --text: #2c3e50; --primary: #3498db; --card: #ffffff; --border: #ddd; --shadow: rgba(0, 0, 0, 0.05); --success: #28a745; }
        [data-theme="dark"] { --bg: #1a1a2e; --text: #e0e0e0; --primary: #1abc9c; --card: #2c2c40; --border: #444; --shadow: rgba(0, 0, 0, 0.15); }
        body { font-family: 'Poppins', sans-serif; background: var(--bg); color: var(--text); transition: background-color 0.3s ease, color 0.3s ease; line-height: 1.6; padding-top: 20px; }
        .reseller-container { max-width: 800px; margin: 0 auto; padding: 0 20px; text-align: center; }
        .reseller-card { background-color: var(--card); border: 2px solid var(--border); border-radius: 12px; padding: 30px; width: 100%; max-width: 350px; box-shadow: 0 8px 20px var(--shadow); }
        .reseller-card-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 25px; margin-top: 30px; }
        .btn-choose { background-color: var(--primary); color: white; padding: 12px 25px; border-radius: 8px; font-weight: 600; margin-top: 20px; display: inline-block; border: none; cursor: pointer; }
        
        /* Gaya untuk Form Pendaftaran Minat */
        #form-pendaftaran-minat {
            margin-top: 50px;
            padding: 30px;
            background-color: var(--card);
            border-radius: 12px;
            text-align: left;
            display: none; /* Disembunyikan secara default */
        }
        #form-pendaftaran-minat input {
            width: 100%; padding: 12px; margin-top: 8px; margin-bottom: 15px; border-radius: 8px; border: 1px solid var(--border); background-color: var(--bg); color: var(--text);
        }
        #form-pendaftaran-minat label { font-weight: 600; }
        #status-message { text-align: center; margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body data-theme="dark">
    <div class="reseller-container">
        <h1>Berminat Menjadi Reseller Kami?</h1>
        <p>Pilih paket yang Anda inginkan di bawah ini untuk memulai.</p>
        
        <div class="reseller-card-container">
            <div class="reseller-card">
                <h3>Reseller Paket A</h3>
                <p>Deposit Rp 100.000</p>
                <button id="pilih-paket-a" class="btn-choose">Saya Minat Paket A</button>
            </div>
            <div class="reseller-card">
                <h3>Reseller Paket B</h3>
                <p>Deposit Rp 50.000</p>
                <button id="pilih-paket-b" class="btn-choose">Saya Minat Paket B</button>
            </div>
        </div>

        <div id="form-pendaftaran-minat">
            <h2 id="form-title"></h2>
            <p>Silakan isi data di bawah ini. Tim kami akan segera menghubungi Anda melalui WhatsApp untuk proses selanjutnya.</p>
            <form id="lead-form">
                <input type="hidden" id="paket-dipilih">
                
                <label for="nama-lengkap">Nama Lengkap</label>
                <input type="text" id="nama-lengkap" required placeholder="Masukkan nama Anda">
                
                <label for="email">Alamat Email</label>
                <input type="email" id="email" required placeholder="email@anda.com">

                <label for="whatsapp">Nomor WhatsApp (Aktif)</label>
                <input type="tel" id="whatsapp" required placeholder="Contoh: 081234567890">

                <button type="submit" id="submit-lead" class="btn-choose" style="width: 100%;">Kirim Data Saya</button>
            </form>
            <p id="status-message"></p>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        // GANTI DENGAN KONFIGURASI FIREBASE ANDA
        const firebaseConfig = {
            apiKey: "AIzaSy...", // << ISI DENGAN KUNCI API ANDA
            authDomain: "asdarstoredigitalll-d89c4.firebaseapp.com",
            databaseURL: "https://asdarstoredigitalll-d89c4-default-rtdb.firebaseio.com",
            projectId: "asdarstoredigitalll-d89c4",
            storageBucket: "asdarstoredigitalll-d89c4.appspot.com",
            messagingSenderId: "...",
            appId: "..."
        };
        
        // Inisialisasi Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();

        // --- ELEMEN-ELEMEN PENTING ---
        const formContainer = document.getElementById('form-pendaftaran-minat');
        const leadForm = document.getElementById('lead-form');
        const formTitle = document.getElementById('form-title');
        const paketDipilihInput = document.getElementById('paket-dipilih');
        const statusMessageEl = document.getElementById('status-message');

        // --- FUNGSI UNTUK MENAMPILKAN FORM ---
        function tampilkanForm(paket) {
            formTitle.textContent = `Formulir Minat Reseller Paket ${paket}`;
            paketDipilihInput.value = paket;
            formContainer.style.display = 'block';
            formContainer.scrollIntoView({ behavior: 'smooth' });
        }

        // --- EVENT LISTENER UNTUK TOMBOL PILIH PAKET ---
        document.getElementById('pilih-paket-a').addEventListener('click', () => tampilkanForm('A'));
        document.getElementById('pilih-paket-b').addEventListener('click', () => tampilkanForm('B'));

        // --- EVENT LISTENER UNTUK SUBMIT FORM ---
        leadForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const submitButton = document.getElementById('submit-lead');
            submitButton.disabled = true;
            submitButton.textContent = 'Mengirim...';

            // Ambil data dari form
            const leadData = {
                nama: document.getElementById('nama-lengkap').value,
                email: document.getElementById('email').value,
                whatsapp: document.getElementById('whatsapp').value,
                paket_dipilih: paketDipilihInput.value,
                status: 'baru',
                tanggal_kirim: firebase.firestore.FieldValue.serverTimestamp()
            };

            // Simpan data ke koleksi baru 'calon_reseller'
            db.collection('calon_reseller').add(leadData)
                .then(() => {
                    statusMessageEl.style.color = 'green';
                    statusMessageEl.textContent = 'Terima kasih! Data Anda telah kami terima. Tim kami akan segera menghubungi Anda.';
                    leadForm.style.display = 'none'; // Sembunyikan form setelah berhasil
                })
                .catch(error => {
                    console.error("Gagal menyimpan data: ", error);
                    statusMessageEl.style.color = 'red';
                    statusMessageEl.textContent = 'Gagal mengirim data. Silakan coba lagi.';
                    submitButton.disabled = false;
                    submitButton.textContent = 'Kirim Data Saya';
                });
        });

    </script>
</body>
</html>
